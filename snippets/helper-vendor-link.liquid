{% assign collectionHandle = 'all' %}
{% if collection.url %}
  {% assign collectionHandle = collection.handle %}
{% endif %}

{% if settings.productItemVendorCollection %}
  {% capture url %}/collections/{{ collectionHandle }}/{{ item.vendor | handle }}{% endcapture %}
  {% capture vendorLink %}{{ item.vendor | link_to: url }}{% endcapture %}
{% else %}
  {% capture url %}{{ item.vendor | url_for_vendor }}{% endcapture %}
  {% capture vendorLink %}{{ item.vendor | link_to_vendor }}{% endcapture %}
{% endif %}